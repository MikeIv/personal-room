# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—É—à–∏–º –≤ –≤–µ—Ç–∫—É develop
current_branch=$(git symbolic-ref --short HEAD)

if [ "$current_branch" != "develop" ]; then
  echo "‚ö†Ô∏è  –í–Ω–∏–º–∞–Ω–∏–µ: –í—ã –Ω–µ –≤ –≤–µ—Ç–∫–µ develop. –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞: $current_branch"
  echo "üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –≤–µ—Ç–∫–µ develop –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π"
  read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—à? (y/n) " -n 1 -r
  echo
  if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    exit 1
  fi
fi

# –ï—Å–ª–∏ –ø—É—à–∏–º –≤ develop, –ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π remote
if [ "$current_branch" = "develop" ]; then
  remote_name=$(git rev-parse --abbrev-ref --symbolic-full-name @{u} 2>/dev/null | cut -d'/' -f1 || echo "origin")
  if [ "$remote_name" != "origin" ]; then
    echo "‚ö†Ô∏è  –í–Ω–∏–º–∞–Ω–∏–µ: –ü—É—à –≤ develop –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ –≤ origin/develop"
    exit 1
  fi
fi

# –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—É—à–∞ –≤ develop, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å–æ–∑–¥–∞—Ç—å MR
if [ "$current_branch" = "develop" ]; then
  echo ""
  echo "üí° –ü–æ—Å–ª–µ –ø—É—à–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å Pull Request –≤ main:"
  echo "   npm run create-mr"
  echo "   –∏–ª–∏"
  echo "   node scripts/create-mr.js"
fi
